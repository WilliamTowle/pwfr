#!/usr/bin/python
## pwfr - python weather forecast reporter
## vim: ft=python ts=4 sw=4 et:

#*   Open Source software - copyright and GPLv2 apply. Briefly:       *
#*    - No warranty/guarantee of fitness, use is at own risk          *
#*    - No restrictions on strictly-private use/copying/modification  *
#*    - No re-licensing this work under more restrictive terms        *
#*    - Redistributing? Include/offer to deliver original source      *
#*   Philosophy/full details at http://www.gnu.org/copyleft/gpl.html  *

import getopt, sys
import bbcreader

def usage(message=None):
    if message:
        print(message)
    else:
        print("This is 'pwfr', the python weather forecast reporter")
    print
    print("Usage:")
    print("\t%s [OPTIONS] LOCATION" %(sys.argv[0]))
    print
    print("Options:")
    print("\t-h, --help: show this help")

if __name__ == "__main__":
    try:
        opts, args = getopt.getopt(sys.argv[1:], "h", ["help"])
    except getopt.GetoptError as oe:
        usage("Error in options: %s" %(oe.msg))
        sys.exit(1)

    for opt, arg in opts:
        if opt in ('-h', '--help'):
            usage()
            sys.exit()

    if len(args) == 0:
        usage("ERROR: Expected a location argument")
        sys.exit(1)
    elif len(args) > 1:
        usage("ERROR: Only one location expected")
        sys.exit(1)
    else:
        fr= bbcreader.BBCReader(args[0])
        print(fr.getSummary())
